# 作业 3: 创建一个类（Make a Class）

## 简介

本次作业的目的是通过使用 C++ 编写一个模板类来理解类的基本概念和功能，涵盖构造函数、析构函数、拷贝构造、赋值运算符、移动语义、getter 和 setter 函数的使用。该类支持处理不同的数据类型，并通过智能指针进行资源管理，避免内存泄漏。

---

## 要求

### 必须包含以下特性：
- **自定义构造函数**：接受参数并初始化类的成员变量。
- **默认构造函数**：不接受任何参数，并初始化默认值。
- **私有成员**：至少有一个私有成员变量。
- **公有成员函数**：公开的成员函数用于操作类的私有成员。
- **getter 函数**：获取私有成员变量的值。
- **setter 函数**：设置私有成员变量的值。
- **析构函数**：释放资源。
- **拷贝构造函数**：支持深拷贝功能。
- **赋值运算符**：重载赋值运算符以确保对象的正确赋值。
- **移动语义**：实现移动构造函数和移动赋值运算符以优化性能。

---

## 文件结构

- `class.h`: 定义了 `MyClass` 模板类的接口，包含构造函数、析构函数、拷贝和移动语义的声明。
- `class.cpp`: 实现了 `MyClass` 模板类的所有功能，包括深拷贝和智能指针的使用。
- `main.cpp`: 主程序文件，测试类的功能，包括创建对象、设置和获取值、以及拷贝和移动操作。
- `README.md`: 当前文档，描述作业的内容和要求。

---

## 类功能描述

### 类 `MyClass`

#### 私有成员
- **`std::unique_ptr<T> attribute`**：使用智能指针管理类的核心数据，确保资源的安全释放。

#### 公有成员函数
1. **默认构造函数**：
   - 创建一个对象并初始化 `attribute` 为默认值。

2. **自定义构造函数**：
   - 接受一个参数并使用初始化列表来设置 `attribute` 的初始值。

3. **拷贝构造函数**：
   - 支持深拷贝，创建新对象时复制已有对象的内容。

4. **移动构造函数**：
   - 通过移动语义高效地将资源从一个对象转移到另一个对象，而无需进行复制。

5. **赋值运算符重载**：
   - 实现深拷贝，确保对象赋值操作的正确性。
   - 还提供了移动赋值运算符，避免了不必要的拷贝。

6. **getter 函数 `getValue()`**：
   - 返回私有成员变量 `attribute` 的值。

7. **setter 函数 `setValue(T value)`**：
   - 修改 `attribute` 的值。

8. **析构函数**：
   - 自动释放智能指针所管理的资源。

9. **友元函数 `operator<<`**：
   - 允许通过 `std::cout` 直接输出类对象的值。

---

## 使用方法

### 1. 编译程序
在命令行中运行以下命令来编译程序：

```bash
g++ -o myclass main.cpp class.cpp
```

### 2. 运行程序
编译成功后，使用以下命令运行程序：

```bash
./myclass
```

### 3. 程序示例输出

```bash
默认构造函数调用
自定义构造函数调用
ClassOne 的值: 0
ClassTwo 的值: hello
修改后的 ClassOne 的值: 42
拷贝构造函数调用
ClassThree (拷贝 ClassOne) 的值: 42
移动构造函数调用
ClassFour (移动 ClassTwo) 的值: hello
析构函数调用
析构函数调用
析构函数调用
析构函数调用
```

---

## 主要功能展示

- **默认构造函数**：生成了带有默认值的对象。
- **自定义构造函数**：初始化带有指定值的对象。
- **getter 和 setter**：展示了如何通过 `getValue` 获取值，及通过 `setValue` 设置新值。
- **拷贝构造函数**：复制对象并创建一个新的对象。
- **移动构造函数**：展示了如何通过移动语义高效转移对象的资源，避免不必要的拷贝。
- **析构函数**：在程序结束时释放资源，确保内存安全。

---

## 总结

本次作业通过构建模板类 `MyClass`，展示了 C++ 中的多个重要概念：构造函数、析构函数、智能指针、拷贝与移动语义。该类可以处理不同类型的数据，并使用智能指针确保资源的正确管理。同时，类提供了灵活的接口，使得操作私有成员变得简单且安全。

---

### 扩展

如果希望进一步完善此类，可以考虑：
- 增加更多的错误处理机制。
- 实现更多的运算符重载，例如比较运算符。
- 使用其他标准容器（如 `std::vector`）来存储多个属性。

---

通过这次作业，熟悉了 C++ 类的基础与高级概念，为后续更复杂的类设计奠定了基础。

---